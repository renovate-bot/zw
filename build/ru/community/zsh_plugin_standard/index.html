<!doctype html>
<html class="docs-version-current" lang="ru" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v0.0.0-4727">
<link rel="alternate" type="application/rss+xml" href="/ru/blog/rss.xml" title="❮ ZI ❯ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ru/blog/atom.xml" title="❮ ZI ❯ Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MT10GVL59X"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-MT10GVL59X",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="❮ ZI ❯" href="/ru/opensearch.xml">
<link rel="icon" href="/ru/zw/logo.svg">
<link rel="manifest" href="/ru/manifest.json">
<link rel="browserconfig" href="/ru/browserconfig.xml">
<meta name="theme-color" content="rgb(35, 184, 152)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/ru/zw/logo.png">
<meta name="msapplication-TileImage" content="/ru/zw/logo.png">
<meta name="msapplication-TileColor" content="#000">
<script src="https://kit.fontawesome.com/a6c194e645.js" crossorigin="anonymous"></script>
<script src="https://enterprise.crowdin.com/crowdjet/crowdjet.js"></script><title data-rh="true">Zsh Plugin Standard | ❮ ZI ❯</title><meta data-rh="true" property="og:image" content="https://z.digitalclouds.dev/ru/zw/logo/320x320.png"><meta data-rh="true" name="twitter:image" content="https://z.digitalclouds.dev/ru/zw/logo/320x320.png"><meta data-rh="true" property="og:url" content="https://z.digitalclouds.dev/ru/community/zsh_plugin_standard"><meta data-rh="true" name="docusaurus_locale" content="ru"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-community-current"><meta data-rh="true" name="docsearch:language" content="ru"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-community-current"><meta data-rh="true" name="twitter:card" content="summary"><meta data-rh="true" property="og:title" content="Zsh Plugin Standard | ❮ ZI ❯"><meta data-rh="true" name="description" content="What Is A Zsh Plugin?"><meta data-rh="true" property="og:description" content="What Is A Zsh Plugin?"><link data-rh="true" rel="icon" href="/ru/zw/favicon.ico"><link data-rh="true" rel="canonical" href="https://z.digitalclouds.dev/ru/community/zsh_plugin_standard"><link data-rh="true" rel="alternate" href="https://z.digitalclouds.dev/community/zsh_plugin_standard" hreflang="en"><link data-rh="true" rel="alternate" href="https://z.digitalclouds.dev/ja/community/zsh_plugin_standard" hreflang="ja"><link data-rh="true" rel="alternate" href="https://z.digitalclouds.dev/ru/community/zsh_plugin_standard" hreflang="ru"><link data-rh="true" rel="alternate" href="https://z.digitalclouds.dev/zh-Hans/community/zsh_plugin_standard" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://z.digitalclouds.dev/community/zsh_plugin_standard" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://8A6CKETM6G-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/ru/assets/css/styles.1184d903.css">
<link rel="preload" href="/ru/assets/js/runtime~main.6fd40405.js" as="script">
<link rel="preload" href="/ru/assets/js/main.b1e6b9a5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_cIvR">Перейти к основному содержимому</a></div><div class="announcementBar_o_kh" role="banner"><div class="announcementBarPlaceholder_vtkT"></div><div class="announcementBarContent_c7Z7">If you like ❮ ZI ❯ - give it a <a target="_blank" rel="noopener noreferrer" href="https://github.com/z-shell/zi">⭐️</a> and follow us on <a target="_blank" rel="noopener noreferrer" href="https://github.com/z-shell"><i class="fa-brands fa-github-alt" width="16" height="16">GitHub</i></a> or <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/zshell_zi"><i class="fa-brands fa-twitter" width="16" height="16">Twitter</i></a></div><button type="button" class="clean-btn close announcementBarClose_rZAK" aria-label="Закрыть"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_zaDa"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/ru/"><div class="navbar__logo"><img src="/ru/zw/logo.svg" alt="❮ ZI ❯ Logo" class="themedImage_ocox themedImage--light_jDDz" height="32" width="32"><img src="/ru/zw/logo.svg" alt="❮ ZI ❯ Logo" class="themedImage_ocox themedImage--dark_MPXm" height="32" width="32"></div><b class="navbar__title">❮ ZI ❯</b></a><a class="navbar__item navbar__link" href="/ru/docs/intro"><span>Docs</span></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><span><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_f3pI"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg><span>Русский</span></span></span></a><ul class="dropdown__menu"><li><a href="/community/zsh_plugin_standard" target="_self" rel="noopener noreferrer" class="dropdown__link"><span>English</span></a></li><li><a href="/ja/community/zsh_plugin_standard" target="_self" rel="noopener noreferrer" class="dropdown__link"><span>日本語</span></a></li><li><a href="/ru/community/zsh_plugin_standard" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active"><span>Русский</span></a></li><li><a href="/zh-Hans/community/zsh_plugin_standard" target="_self" rel="noopener noreferrer" class="dropdown__link"><span>简体中文</span></a></li><li><a href="https://digitalclouds.crowdin.com/z-shell" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Help Us Translate<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_N6EJ"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><a href="https://github.com/z-shell/zi/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"><span></span></a><div class="toggle_IfB0 toggle_kEn3 toggleDisabled_WHmG"><div class="toggleButton_BZAX" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_SNFM"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_lqKs"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" checked="" class="toggleScreenReader_IO1O" aria-label="Switch between dark and light mode (currently dark mode)"></div><div class="searchBox_F0Md"><button type="button" class="DocSearch DocSearch-Button" aria-label="Поиск"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Поиск</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_vVol"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_k7oR" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_TANK"><div class="sidebar_UgbA sidebarWithHideableNavbar_u__6"><a tabindex="-1" class="sidebarLogo_sIEQ" target="_self" href="/ru/"><img src="/ru/zw/logo.svg" alt="❮ ZI ❯ Logo" class="themedImage_ocox themedImage--light_jDDz" height="32" width="32"><img src="/ru/zw/logo.svg" alt="❮ ZI ❯ Logo" class="themedImage_ocox themedImage--dark_MPXm" height="32" width="32"><b>❮ ZI ❯</b></a><nav class="menu thin-scrollbar menu_dxFf menuWithAnnouncementBar_Se5v"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ru/community/intro"><span>Zsh Knowledge Base</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/ru/community/zsh_plugin_standard"><span>Zsh Plugin Standard</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ru/community/zsh_handbook"><span>Zsh Native Scripting Handbook</span></a></li></ul></nav><button type="button" title="Свернуть сайдбар" aria-label="Свернуть сайдбар" class="button button--secondary button--outline collapseSidebarButton_sUbj"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_I3h7"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_GFc_"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_aSGu"><div class="docItemContainer_D8F8"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_N6BI" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_mIMU" href="/ru/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_mIMU" itemprop="item" href="/ru/community/zsh_plugin_standard"><span itemprop="name">Zsh Plugin Standard</span></a><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_FVtW theme-doc-toc-mobile tocMobile_YBih"><button type="button" class="clean-btn tocCollapsibleButton_I6CC">Содержание этой страницы</button></div><div class="theme-doc-markdown markdown"><header><h1>Zsh Plugin Standard</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="what-is-a-zsh-plugin">What Is A Zsh Plugin?<a class="hash-link" href="#what-is-a-zsh-plugin" title="Прямая ссылка на этот заголовок">​</a></h2><p>Historically, Zsh plugins were first defined by Oh My Zsh. They provide for a way to package together files that extend
or configure the shell’s functionality in a particular way.</p><p>At a simple level, a plugin:</p><ol><li><p>Has its directory added to <code>$fpath</code>
(<a href="http://zsh.sourceforge.net/Doc/Release/Functions.html#Autoloading-Functions" target="_blank" rel="noopener noreferrer">Zsh documentation</a>). This is being
done either by a plugin manager or by the plugin itself (see <a href="#run-on-unload-call">5th section</a> for more
information).</p></li><li><p>Has it’s first <code>*.plugin.zsh</code> file sourced (or <code>*.zsh</code>, <code>init.zsh</code>, <code>*.sh</code>, these are non-standard).</p><p>2.1 The first point allows plugins to provide completions and functions that are loaded via Zsh’s <code>autoload</code>
mechanism (a single function per file).</p></li><li><p>From a more broad perspective, a plugin consists of:</p><p>3.1. A directory containing various files (the main script, autoload functions, completions, Makefiles, backend
programs, documentation).</p><p>3.2. A sourceable script that obtains the path to its directory via <code>$0</code> (see the <a href="#zero-handling">next section</a> for
a related enhancement proposal).</p><p>3.3. A Github (or another site) repository identified by two components <strong>username</strong>/<strong>pluginname</strong>.</p><p>3.4. A software package containing any type of command line artifacts – when used with advanced plugin managers that
have hooks, can run Makefiles, add directories to <code>$PATH</code>.</p></li></ol><p>Below follow proposed enhancements and codifications of the definition of a &quot;Zsh the plugin&quot; and the actions of plugin
managers – the proposed standardization.</p><p>They cover the information on how to write a Zsh plugin.</p><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="zero-handling">1. Standardized <code>$0</code> Handling<a class="hash-link" href="#zero-handling" title="Прямая ссылка на этот заголовок">​</a></h2><blockquote><p>[ zero-handling ]</p></blockquote><p>To get the plugin’s location, plugins should do:</p><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">0</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${ZERO</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">:-</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${${0</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">:</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">#</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$ZSH_ARGZERO}</span><span class="token string" style="color:rgb(255, 121, 198)">:-</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${(</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">%</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">:-</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">%</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">N}</span><span class="token string" style="color:rgb(255, 121, 198)">}}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">0</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${${(M)0</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">:</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">#</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">/</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">*}</span><span class="token string" style="color:rgb(255, 121, 198)">:-</span><span class="token string environment constant" style="color:rgb(189, 147, 249)">$PWD</span><span class="token string" style="color:rgb(255, 121, 198)">/</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$0</span><span class="token string" style="color:rgb(255, 121, 198)">}&quot;</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><p>Then <code>${0:h}</code> to get plugin’s directory.</p><p>The one-line code above will:</p><ol><li><p>Be backward-compatible with normal <code>$0</code> setting and usage.</p></li><li><p>Use <code>ZERO</code> if it’s not empty,</p><ul><li><p>the plugin manager will be easily able to alter effective <code>$0</code> before loading a plugin,</p></li><li><p>this allows e.g. <code>eval &quot;$(&lt;plugin)&quot;</code>, which can be faster than <code>source</code>
(<a href="http://www.zsh.org/mla/workers/2017/msg01827.html" target="_blank" rel="noopener noreferrer">comparison</a> note that it’s not for a compiled script).</p></li></ul></li><li><p>Use <code>$0</code> if it doesn’t contain the path to the Zsh binary,</p><ul><li><p>plugin manager will still be able to set <code>$0</code>, although more difficultly, requires <code>unsetopt function_argzero</code>
before sourcing plugin script, and <code>0=…​</code> assignment after sourcing plugin script.</p></li><li><p><code>unsetopt function_argzero</code> will be detected (it causes <code>$0</code> not to contain a plugin-script path, but the path to
Zsh binary, if not overwritten by a <code>0=…​</code> assignment),</p></li><li><p><code>setopt posix_argzero</code> will be detected (as above).</p></li></ul></li><li><p>Use <code>%N</code> prompt expansion flag, which always gives absolute path to script,</p><ul><li>plugin manager cannot alter this (no advanced loading of plugin is possible), but simple plugin-file sourcing
(without a plugin manager) will be saved from breaking caused by the mentioned <code>*_argzero</code> options, so this is a
very good last-resort fallback.</li></ul></li><li><p>Finally, in the second line, it will ensure that <code>$0</code> contains an absolute path by prepending it with <code>$PWD</code> if
necessary.</p></li></ol><p>The goal is flexibility, with essential motivation to support <code>eval &quot;$(&lt;plugin)&quot;</code> and definitely solve
<code>setopt no_function_argzero</code> and <code>setopt posix_argzero</code> cases.</p><p>A plugin manager will be even able to convert a plugin to a function (author implemented such proof of concept
functionality, it’s fully possible – also in an automatic fashion), but performance differences of this are yet unclear.</p><p>It might however provide a use case.</p><p>The last, 5th point also allows using the <code>$0</code> handling in scripts (i.e. runnable with the hashbang <code>#!…</code>) to get the
directory in which the script file resides.</p><p>The assignment uses quoting to make it resilient to the combination of <code>GLOB_SUBST</code> and <code>GLOB_ASSIGN</code> options. It’s a
standard snippet of code, so it has to be always working.</p><p>When you’ll set e.g.: the <code>zsh</code> emulation in a function, you in general don’t have to quote assignments.</p><h3 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="status--zero-handling-"><strong>STATUS:</strong> <!-- -->[ zero-handling ]<a class="hash-link" href="#status--zero-handling-" title="Прямая ссылка на этот заголовок">​</a></h3><ol><li><p>Plugin managers: <a href="https://github.com/z-shell/zi" target="_blank" rel="noopener noreferrer">ZI</a>, <a href="https://github.com/zdharma-continuum/zinit" target="_blank" rel="noopener noreferrer">Zinit</a>,
<a href="https://github.com/zpm-zsh/zpm" target="_blank" rel="noopener noreferrer">Zpm</a>, <a href="https://github.com/jandamm/zgenom" target="_blank" rel="noopener noreferrer">Zgenom</a>, Zgen (after and if the
<a href="https://github.com/tarjoilija/zgen/pull/124" target="_blank" rel="noopener noreferrer">PR</a> will be merged).</p></li><li><p>Plugins: <a href="https://github.com/search?q=%22$%7BZERO:-$%7B0:%23$ZSH_ARGZERO%7D%7D%22&amp;type=Code" target="_blank" rel="noopener noreferrer">GitHub search</a></p></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="funtions-directory">2. Functions Directory<a class="hash-link" href="#funtions-directory" title="Прямая ссылка на этот заголовок">​</a></h2><blockquote><p>[ functions-directory ]</p></blockquote><p>Despite that, the current-standard plugins have their main directory added to <code>$fpath</code>, a more clean approach is being
proposed:</p><p>that the plugins use a subdirectory called <code>functions</code> to store their completions and autoload functions. This will
allow a much cleaner design of plugins.</p><p>The plugin manager should add such a directory to <code>$fpath</code>.</p><p>The lack of support of the current plugin managers can be easily resolved via the <a href="#indicator">indicator</a>:</p><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${zsh_loaded_plugins</span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">[</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">-1</span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">]</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">}</span><span class="token plain"> </span><span class="token operator">!=</span><span class="token plain"> */kalc </span><span class="token operator">&amp;&amp;</span><span class="token plain"> -z </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${fpath</span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">[</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">(r)${0</span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">h}</span><span class="token plain">/functions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">fpath</span><span class="token operator">+=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${0</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">:</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">h}</span><span class="token string" style="color:rgb(255, 121, 198)">/functions&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><p>or, via use of the <code>PMSPEC</code> <a href="#pmspec">parameter</a>:</p><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PMSPEC</span><span class="token plain"> </span><span class="token operator">!=</span><span class="token plain"> *f* </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">fpath</span><span class="token operator">+=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${0</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">:</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">h}</span><span class="token string" style="color:rgb(255, 121, 198)">/functions&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><p>The above snippet added to the <code>plugin.zsh</code> file will add the directory to the <code>$fpath</code> with the compatibility with any
new plugin managers preserved.</p><p>The existence of the <code>functions</code> subdirectory cancels the normal adding of the main plugin directory to <code>$fpath</code>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="status--functions-directory-"><strong>STATUS:</strong> <!-- -->[ functions-directory ]<a class="hash-link" href="#status--functions-directory-" title="Прямая ссылка на этот заголовок">​</a></h3><ol><li>Plugin managers: <a href="https://github.com/zpm-zsh/zpm" target="_blank" rel="noopener noreferrer">Zpm</a>, <a href="https://github.com/z-shell/zi" target="_blank" rel="noopener noreferrer">ZI</a>,
<a href="https://github.com/zdharma-continuum/zinit" target="_blank" rel="noopener noreferrer">Zinit</a>, <a href="https://github.com/jandamm/zgenom" target="_blank" rel="noopener noreferrer">Zgenom</a>.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="binaries-directory">3. Binaries Directory<a class="hash-link" href="#binaries-directory" title="Прямая ссылка на этот заголовок">​</a></h2><blockquote><p>[ binaries-directory ]</p></blockquote><p>Plugins sometimes provide a runnable script or program, either for their internal use or for the end-user.</p><p>It is proposed that for the latter, the plugin shall use a <code>bin/</code> subdirectory inside its main dir (it is recommended,
that for internal use, the runnable be called via the <code>$0</code> value obtained as described above).</p><p>The runnable should be put into the directory with a <code>+x</code> access right assigned.</p><p>The task of the plugin manager should be:</p><ol><li><p>Before sourcing the plugin’s script it should test, if the <code>bin/</code> directory exists within the plugin directory.</p></li><li><p>If it does, it should add the directory to <code>$PATH</code>.</p></li><li><p>The plugin manager can also, instead of extending the <code>$PATH</code>, create a <strong>shim</strong> (i.e.: a forwarder script) or a
symbolic link inside a common directory that’s already added to <code>$PATH</code> (to limit extending it).</p></li><li><p>The plugin manager is permitted to do optional things like ensuring <code>+x</code> access rights on the directory contents.</p></li></ol><p>The <code>$PMSPEC</code> code letter for the feature is <code>b</code>, and it allows for the plugin to handle the <code>$PATH</code> extending itself,
via, e.g.:</p><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PMSPEC</span><span class="token plain"> </span><span class="token operator">!=</span><span class="token plain"> *b* </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">path</span><span class="token operator">+=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${0</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">:</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">h}</span><span class="token string" style="color:rgb(255, 121, 198)">/bin&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="status--binaries-directory-"><strong>STATUS:</strong> <!-- -->[ binaries-directory ]<a class="hash-link" href="#status--binaries-directory-" title="Прямая ссылка на этот заголовок">​</a></h3><ol><li>Plugin managers: <a href="https://github.com/zpm-zsh/zpm" target="_blank" rel="noopener noreferrer">Zpm</a>, <a href="https://github.com/jandamm/zgenom" target="_blank" rel="noopener noreferrer">Zgenom</a> (when you set
<code>ZGENOM_AUTO_ADD_BIN=1</code>).</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="unload-function">4. Unload Function<a class="hash-link" href="#unload-function" title="Прямая ссылка на этот заголовок">​</a></h2><blockquote><p>[ unload-function ]</p></blockquote><p>If a plugin is named e.g. <code>kalc</code> (and is available via <code>an-user/kalc</code> plugin-ID), then it can provide a function,
<code>kalc_plugin_unload</code>, that can be called by a plugin manager to undo the effects of loading that plugin.</p><p>A plugin manager can implement its tracking of changes made by a plugin so this is in general optional. However, to
properly unload e.g. a prompt, dedicated tracking (easy to do for the plugin creator) can provide better, predictable
results.</p><p>Any special, uncommon effects of loading a plugin are possible to undo only by a dedicated function.</p><p>However, an interesting compromise approach is available – to withdraw only the special effects of loading a plugin via
the dedicated, plugin-provided function and leave the rest to the plugin manager. The value of such an approach is that
maintaining of such function (if it is to withdraw <strong>all</strong> plugin side-effects) can be a daunting task requiring
constant monitoring of it during the plugin development process.</p><p>Note that the unload function should contain <code>unfunction $0</code> (or better <code>unfunction kalc_plugin_unload</code> etc., for
compatibility with the <code>*_argzero</code> options), to also delete the function itself.</p><h3 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="unload-function"><strong>STATUS:</strong> <!-- -->[ unload-function ]<a class="hash-link" href="#unload-function" title="Прямая ссылка на этот заголовок">​</a></h3><ul><li><p><a href="https://github.com/z-shell/zi" target="_blank" rel="noopener noreferrer">ZI</a>, implements plugin unloading and calls the function.</p></li><li><p><code>romkatv/powerlevel10k</code>, is <a href="https://github.com/romkatv/powerlevel10k/blob/f17081ca/internal/p10k.zsh#L5390" target="_blank" rel="noopener noreferrer">using</a>
the function to execute a specific task: shutdown of the binary, background
<a href="https://github.com/romkatv/gitstatus" target="_blank" rel="noopener noreferrer">gitstatus</a> demon, with a very good results,</p></li><li><p><code>agkozak/agkozak-zsh-prompt</code> is
<a href="https://github.com/agkozak/agkozak-zsh-prompt/blob/ed228952d68fea6d5cad3beee869167f76c59606/agkozak-zsh-prompt.plugin.zsh#L992-L1039" target="_blank" rel="noopener noreferrer">using</a>
the function to completely unload the prompt,</p></li><li><p><code>agkozak/zsh-z</code> is
<a href="https://github.com/agkozak/zsh-z/blob/16fba5e9d5c4b650358d65e07609dda4947f97e8/zsh-z.plugin.zsh#L680-L698" target="_blank" rel="noopener noreferrer">using</a> the
function to completly unload the plugin,</p></li><li><p><code>agkozak/zhooks</code> is
<a href="https://github.com/agkozak/zhooks/blob/628e1e3b8373bf31c26cb154f71c16ebe9d13b51/zhooks.plugin.zsh#L75-L82" target="_blank" rel="noopener noreferrer">using</a> the
function to completely unload the plugin.</p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="run-on-unload-call">5. <code>@zsh-plugin-run-on-unload</code> Call<a class="hash-link" href="#run-on-unload-call" title="Прямая ссылка на этот заголовок">​</a></h2><blockquote><p>[ run-on-unload-call ]</p></blockquote><p>The plugin manager can provide a function <code>@zsh-plugin-run-on-unload</code> which has the following call syntax:</p><div class="codeBlockContainer_NBvI language-zsh theme-code-block"><div class="codeBlockContent_yvht zsh"><pre tabindex="0" class="prism-code language-zsh codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token plain">@zsh-plugin-run-on-unload &quot;{code-snippet-1}&quot; &quot;{code-snippet-2}&quot; …</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><p>The function registers pieces of code to be run by the plugin manager <strong>on unload of the plugin</strong>.</p><p>The execution of the code should be done by the <code>eval</code> built-in in the same order as they are passed to the call.</p><p>The code should be executed in the plugin’s directory, in the current shell.</p><p>The mechanism thus provides another way, side to the <a href="#unload-function">unload function</a>, for the plugin to participate
in the process of unloading it.</p><h3 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="status--run-on-unload-call-"><strong>STATUS:</strong> <!-- -->[ run-on-unload-call ]<a class="hash-link" href="#status--run-on-unload-call-" title="Прямая ссылка на этот заголовок">​</a></h3><ol><li>Plugin managers: <a href="https://github.com/z-shell/zi" target="_blank" rel="noopener noreferrer">ZI</a>, <a href="https://github.com/zdharma-continuum/zinit" target="_blank" rel="noopener noreferrer">Zinit</a>.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="run-on-update-call">6. <code>@zsh-plugin-run-on-update</code> Call<a class="hash-link" href="#run-on-update-call" title="Прямая ссылка на этот заголовок">​</a></h2><blockquote><p>[ run-on-update-call ]</p></blockquote><p>The plugin manager can provide a function <code>@zsh-plugin-run-on-update</code> which has the following call syntax:</p><div class="codeBlockContainer_NBvI language-zsh theme-code-block"><div class="codeBlockContent_yvht zsh"><pre tabindex="0" class="prism-code language-zsh codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token plain">@zsh-plugin-run-on-update &quot;{code-snippet-1}&quot; &quot;{code-snippet-2}&quot; …</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><p>The function registers pieces of code to be run by the plugin manager on an update of the plugin.</p><p>The execution of the code should be done by the <code>eval</code> built-in in the same order as they are passed to the call.</p><p>The code should be executed in the plugin’s directory, possibly in a subshell <strong>After downloading any new commits</strong> to
the repository.</p><h3 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="status--run-on-update-call-"><strong>STATUS:</strong> <!-- -->[ run-on-update-call ]<a class="hash-link" href="#status--run-on-update-call-" title="Прямая ссылка на этот заголовок">​</a></h3><ol><li>Plugin managers: <a href="https://github.com/z-shell/zi" target="_blank" rel="noopener noreferrer">ZI</a>, <a href="https://github.com/zdharma-continuum/zinit" target="_blank" rel="noopener noreferrer">Zinit</a>.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="activity-indicator">7. Plugin Manager Activity Indicator<a class="hash-link" href="#activity-indicator" title="Прямая ссылка на этот заголовок">​</a></h2><blockquote><p>[ activity-indicator ]</p></blockquote><p>Plugin managers should set the <code>$zsh_loaded_plugins</code> array to contain all previously loaded plugins and the plugin
currently being loaded (as the last element).</p><p>This will allow any plugin to:</p><ol><li><p>Check which plugins are already loaded.</p></li><li><p>Check if it is being loaded by a plugin manager (i.e. not just sourced).</p></li></ol><p>The first item allows a plugin to e.g. issue a notice about missing dependencies.</p><p>Instead of issuing a notice, it may be able to satisfy the dependencies from resources it provides.</p><p>For example, the <code>pure</code> prompt provides a <code>zsh-async</code> dependency library within its source tree, which is normally a
separate project. Consequently, the prompt can decide to source its private copy of <code>zsh-async</code>, having also reliable
<code>$0</code> defined by the previous section (note: <code>pure</code> doesn’t normally do this).</p><p>The second item allows a plugin to e.g. set up <code>$fpath</code>, knowing that plugin manager will not handle this:</p><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${zsh_loaded_plugins</span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">[</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">-1</span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">]</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">}</span><span class="token plain"> </span><span class="token operator">!=</span><span class="token plain"> */kalc </span><span class="token operator">&amp;&amp;</span><span class="token plain"> -z </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${fpath</span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">[</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">(r)${0</span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">h}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">fpath</span><span class="token operator">+=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${0</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">:</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">h}</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><p>This will allow the user to reliably source the plugin without using a plugin manager.</p><p>The code uses the wrapping braces around variables (i.e.: e.g.: <code>${fpath…}</code>) to make it compatible with the <code>KSH_ARRAYS</code>
option and the quoting around <code>${0:h}</code> to make it compatible with the <code>SH_WORD_SPLIT</code> option.</p><h3 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="status--activity-indicator-"><strong>STATUS:</strong> <!-- -->[ activity-indicator ]<a class="hash-link" href="#status--activity-indicator-" title="Прямая ссылка на этот заголовок">​</a></h3><ol><li><p>Plugin managers: <a href="https://github.com/z-shell/zi" target="_blank" rel="noopener noreferrer">ZI</a>, <a href="https://github.com/zdharma-continuum/zinit" target="_blank" rel="noopener noreferrer">Zinit</a>,
<a href="https://github.com/zpm-zsh/zpm" target="_blank" rel="noopener noreferrer">Zpm</a>, <a href="https://github.com/jandamm/zgenom" target="_blank" rel="noopener noreferrer">Zgenom</a>, Zgen (after and if the
<a href="https://github.com/tarjoilija/zgen/pull/124" target="_blank" rel="noopener noreferrer">PR</a> will be merged).</p></li><li><p>Plugins: <a href="https://github.com/search?q=if+%22zsh_loaded_plugins%22&amp;type=Code" target="_blank" rel="noopener noreferrer">GitHub search</a></p></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="global-parameter-with-prefix">8. Global Parameter With PREFIX For Make, Configure, Etc<a class="hash-link" href="#global-parameter-with-prefix" title="Прямая ссылка на этот заголовок">​</a></h2><blockquote><p>[ global-parameter-with-prefix ]</p></blockquote><p>Plugin managers may export the parameter <code>$ZPFX</code> which should contain a path to a directory dedicated for user-land
software, i.e. for directories <code>$ZPFX/bin</code>, <code>$ZPFX/lib</code>, <code>$ZPFX/share</code>, etc.</p><p>The suggested name of the directory is <code>polaris</code> (e.g.: ZI uses this name and places this directory at <code>~/.zi/polaris</code>
by default).</p><p>Users can then configure hooks (a feature of e.g. zplug and ZI) to invoke e.g. <code>make PREFIX=$ZPFX install</code> at clone &amp;
update of the plugin to install software like e.g. <a href="https://github.com/tj/git-extras" target="_blank" rel="noopener noreferrer">tj/git-extras</a>. This is a the
developing role of Zsh plugin managers as package managers, where <code>.zshrc</code> has a similar role to Chef or Puppet
configuration and allows to <strong>declare</strong> system state, and have the same state on different accounts/machines.</p><p>No-narration facts-list related to <code>$ZPFX</code>:</p><ol><li><p><code>export ZPFX=&quot;$HOME/polaris&quot;</code> (or e.g. <code>$HOME/.zi/polaris</code>)</p></li><li><p><code>make PREFIX=$ZPFX install</code></p></li><li><p><code>./configure --prefix=$ZPFX</code></p></li><li><p><code>cmake -DCMAKE_INSTALL_PREFIX=$ZPFX .</code></p></li><li><p><code>zi ice make&quot;PREFIX=$ZPFX install&quot;</code></p></li><li><p><code>zi … hook-build:&quot;make PREFIX=$PFX install&quot;</code></p></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="status--global-parameter-with-prefix-"><strong>STATUS:</strong> <!-- -->[ global-parameter-with-prefix ]<a class="hash-link" href="#status--global-parameter-with-prefix-" title="Прямая ссылка на этот заголовок">​</a></h3><ol><li>Plugin managers: <a href="https://github.com/z-shell/zi" target="_blank" rel="noopener noreferrer">ZI</a>, <a href="https://github.com/zdharma-continuum/zinit" target="_blank" rel="noopener noreferrer">Zinit</a>,
<a href="https://github.com/zpm-zsh/zpm" target="_blank" rel="noopener noreferrer">Zpm</a>, <a href="https://github.com/jandamm/zgenom" target="_blank" rel="noopener noreferrer">Zgenom</a>.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="global-parameter-with-capabilities">9. Global Parameter holding the plugin manager’s capabilities<a class="hash-link" href="#global-parameter-with-capabilities" title="Прямая ссылка на этот заголовок">​</a></h2><blockquote><p>[ global-parameter-with-capabilities ]</p></blockquote><p>The above paragraphs of the standard spec each constitute a capability, a feature of the plugin manager.</p><p>It would make sense that the capabilities are somehow discoverable. To address this, a global parameter called <code>PMSPEC</code>
(from <em>plugin-manager specification</em>) is proposed.</p><p>It can hold the following Latin letters each informing the plugin, that the plugin manager has support for a given
feature:</p><ul><li><p><code>0</code> – the plugin manager provides the <code>ZERO</code> parameter,</p></li><li><p><code>f</code> - … supports the <code>functions/</code> subdirectory,</p></li><li><p><code>b</code> - … supports the <code>bin/</code> subdirectory,</p></li><li><p><code>u</code> - … the unload function,</p></li><li><p><code>U</code> - … the <code>@zsh-plugin-run-on-unload</code> call,</p></li><li><p><code>p</code> – … the <code>@zsh-plugin-run-on-update</code> call,</p></li><li><p><code>i</code> – … the <code>zsh_loaded_plugins</code> activity indicator,</p></li><li><p><code>P</code> – … the <code>ZPFX</code> global parameter,</p></li><li><p><code>s</code> – … the <code>PMSPEC</code> global parameter itself (i.e.: should be always present).</p></li></ul><p>The contents of the parameter describing a fully-compliant plugin manager should be: <code>0fuUpiPs</code>.</p><p>The plugin can then verify the support by, e.g.:</p><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PMSPEC</span><span class="token plain"> </span><span class="token operator">!=</span><span class="token plain"> *f* </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">fpath</span><span class="token operator">+=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${0</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">:</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">h}</span><span class="token string" style="color:rgb(255, 121, 198)">/functions&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="status--global-parameter-with-capabilities-"><strong>STATUS:</strong> <!-- -->[ global-parameter-with-capabilities ]<a class="hash-link" href="#status--global-parameter-with-capabilities-" title="Прямая ссылка на этот заголовок">​</a></h3><ol><li>Plugin managers: <a href="https://github.com/z-shell/zi" target="_blank" rel="noopener noreferrer">ZI</a>, <a href="https://github.com/zdharma-continuum/zinit" target="_blank" rel="noopener noreferrer">Zinit</a>,
<a href="https://github.com/zpm-zsh/zpm" target="_blank" rel="noopener noreferrer">Zpm</a>, <a href="https://github.com/jandamm/zgenom" target="_blank" rel="noopener noreferrer">Zgenom</a>.</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="zsh-plugin-programming-best-practices">Zsh Plugin-Programming Best practices<a class="hash-link" href="#zsh-plugin-programming-best-practices" title="Прямая ссылка на этот заголовок">​</a></h2><p>The document is to define a <strong>Zsh-plugin</strong> but also to serve as an information source for plugin creators.</p><p>Therefore, it covers also best practices information in this section.</p><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="use-of-add-zsh-hook-to-install-hooks">Use Of <code>add-zsh-hook</code> To Install Hooks<a class="hash-link" href="#use-of-add-zsh-hook-to-install-hooks" title="Прямая ссылка на этот заголовок">​</a></h2><p>Zsh ships with a function <code>add-zsh-hook</code>. It has the following invocation syntax:</p><div class="codeBlockContainer_NBvI language-zsh theme-code-block"><div class="codeBlockContent_yvht zsh"><pre tabindex="0" class="prism-code language-zsh codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token plain">add-zsh-hook [ -L | -dD ] [ -Uzk ] hook function</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><p>The command installs a <code>function</code> as one of the supported zsh <code>hook</code> entries. which are one of: <code>chpwd</code>, <code>periodic</code>,
<code>precmd</code>, <code>preexec</code>, <code>zshaddhistory</code>, <code>zshexit</code>, <code>zsh_directory_name</code>. For their meaning refer to the
<a href="http://zsh.sourceforge.net/Doc/Release/Functions.html#Hook-Functions" target="_blank" rel="noopener noreferrer">Zsh documentation</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="use-of-add-zle-hook-widget-to-install-zle-hooks">Use Of <code>add-zle-hook-widget</code> To Install Zle Hooks<a class="hash-link" href="#use-of-add-zle-hook-widget-to-install-zle-hooks" title="Прямая ссылка на этот заголовок">​</a></h2><p>The zle editor is the part of the Zsh that is responsible for receiving the text from the user.</p><p>It can be said that it’s based on widgets, which are nothing more than Zsh functions that are allowed to be run in Zle
context, i.e. from the Zle editor (plus a few minor differences, like e.g.: the <code>$WIDGET</code> parameter that’s automatically
set by the Zle editor).</p><p>The syntax of the call is:</p><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token plain">add-zle-hook-widget </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> -L </span><span class="token operator">|</span><span class="token plain"> -dD </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> -Uzk </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> hook widgetname</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><p>The call resembles the syntax of the <code>add-zsh-hook</code> function. The only the difference is that it takes a <code>widgetname</code>,
not a function name and that the <code>hook</code> is being one of: <code>isearch-exit</code>, <code>isearch-update</code>, <code>line-pre-redraw</code>,
<code>line-init</code>, <code>line-finish</code>, <code>history-line-set</code>, or <code>keymap-select</code>.</p><p>Their meaning is explained in the
<a href="http://zsh.sourceforge.net/Doc/Release/Zsh-Line-Editor.html#Special-Widgets" target="_blank" rel="noopener noreferrer">Zsh documentation</a>.</p><p>The use of this function is recommended because it allows the installation <strong>multiple</strong> hooks per each <code>hook</code> entry.
Before introducing the <code>add-zle-hook-widget</code> function the &quot;normal&quot; way to install a hook was to define a widget with the
name of one of the special widgets.</p><p>Now, after the function has been introduced in Zsh <code>5.3</code> it should be used instead.</p><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="standard-parameter-naming">Standard Parameter Naming<a class="hash-link" href="#standard-parameter-naming" title="Прямая ссылка на этот заголовок">​</a></h2><p>There’s a convention already present in the Zsh world – to name array variables lowercase and scalars uppercase. It’s
being followed by e.g.: the Zsh manual and the Z shell itself (e.g.: <code>REPLY</code> scalar and <code>reply</code> array, etc.).</p><p>The requirement for the scalars to be uppercase should be, in my opinion, kept only for the global parameters. I.e.:
it’s fine to name local parameters inside a function lowercase even when they are scalars, not only arrays.</p><p>An extension to the convention is being proposed: to name associative arrays (i.e.: hashes) capitalized, i.e.: with only
first letter uppercase and the remaining letters lowercase.</p><p>See <a href="#standard-plugins-hash">the next section</a> for an example of such hash. In the case of the name consisting of
multiple words each of them should be capitalized, e.g.: <code>typeset -A MyHash</code>.</p><p>This convention will increase code readability and bring order to it.</p><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="standard-plugins-hash">Standard <code>Plugins</code> Hash<a class="hash-link" href="#standard-plugins-hash" title="Прямая ссылка на этот заголовок">​</a></h2><p>The plugin often has to declare global parameters that should live throughout a Zsh session. Following the
<a href="#preventing-function-pollution">namespace pollution prevention</a> the plugin could use a hash to store the different
values.</p><p>Additionally, the plugins could use a single hash parameter – called <code>Plugins</code> – to prevent the pollution.</p><p>An example value needed by the plugin:</p><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token plain">…</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">typeset</span><span class="token plain"> -gA Plugins</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Plugins</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">MY_PLUGIN_REPO_DIR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${0</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">:</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">h}</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><p>This way all the data of all plugins will be kept in a single parameter, available for easy examination and overview
(via e.g.: <code>varied Plugins</code>) and also not polluting the namespace.</p><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="standard-recommended-options">Standard Recommended Options<a class="hash-link" href="#standard-recommended-options" title="Прямая ссылка на этот заголовок">​</a></h2><p>The following code snippet is recommended to be included at the beginning of each of the main functions provided by the
plugin:</p><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token plain">emulate -L </span><span class="token function" style="color:rgb(80, 250, 123)">zsh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">setopt extended_glob warn_create_global typeset_silent </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        no_short_loops rc_quotes no_auto_pushd</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><p>It resets all the options to their default state according to the <code>zsh</code> emulation mode, with the use of the
<code>local_options</code> option – so the options will be restored to their previous state when leaving the function.</p><p>It then alters the emulation by <code>6</code> different options:</p><ul><li><p><code>extended_glob</code> – enables one of the main Zshell features – the advanced, the built-in regex-like globing mechanism,</p></li><li><p><code>warn_create_global</code> – enables warnings to be printed each time a (global) the variable is defined without being
explicitly defined by a <code>typeset</code>, <code>local</code>, <code>declare</code>, etc. call; it allows to catch typos and missing localizations
of the variables and thus prevent from writing a bad code,</p></li><li><p><code>typeset_silent</code> – it allows to call <code>typeset</code>, <code>local</code>, etc. multiple times on the same variable; without it, the
second call causes the variable contents to be printed first; using this option allows to declare variables inside
loops, near the place of their use, which sometimes helps to write a more readable code,</p></li><li><p><code>no_short_loops</code> – disables the short-loops syntax; this is done because when the syntax is enabled it limits the
parser’s ability to detect errors (see this <a href="https://www.zsh.org/mla/workers/2011/msg01050.html" target="_blank" rel="noopener noreferrer">zsh-workers post</a> for
the details),</p></li><li><p><code>rc_quotes</code> – adds useful ability to insert apostrophes into an apostrophe-quoted string, by use of <code>&#x27;&#x27;</code> inside it,
e.g.: <code>&#x27;a string’s example&#x27;</code> will yield the string <code>a string’s example</code>,</p></li><li><p><code>no_auto_pushd</code> - disables the automatic push of the directory passed to <code>cd</code> builtin onto the directory stack; this
is useful because otherwise the internal directory changes done by the plugin will pollute the global directory stack.</p></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="standard-recommended-variables">Standard Recommended Variables<a class="hash-link" href="#standard-recommended-variables" title="Прямая ссылка на этот заголовок">​</a></h2><p>It’s good to localize the following variables at the entry of the main function of a plugin:</p><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">local</span><span class="token plain"> MATCH </span><span class="token environment constant" style="color:rgb(189, 147, 249)">REPLY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> integer MBEGIN MEND</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">local</span><span class="token plain"> -a match mbegin mend reply</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><p>The variables starting with <code>m</code> and <code>M</code> are being used by the substitutions utilizing <code>(#b)</code> and <code>(#m)</code> flags,
respectively. They should not leak to the global scope. Also, their automatic creation would trigger the warning from
the <code>warn_create_global</code> option.</p><p>The <code>reply</code> and <code>REPLY</code> parameters are being normally used to return an array or a scalar from a function, respectively
– it’s the standard way of passing values from functions.</p><p>Their use is naturally limited to the functions called from the the main function of a plugin – they should not be used
to pass data around e.g.: in between prompts, thus it’s natural to localize them in the main function.</p><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="standard-function-name-space-prefixes">Standard Function Name-Space Prefixes<a class="hash-link" href="#standard-function-name-space-prefixes" title="Прямая ссылка на этот заголовок">​</a></h2><p>The recommendation is the purely subjective opinion of the author.</p><p>It can evolve – if you have any remarks, don’t hesitate to <a href="https://github.com/z-shell/zw/issues/new" target="_blank" rel="noopener noreferrer">fill them</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="the-problems-solved-by-the-proposition">The Problems Solved By The Proposition<a class="hash-link" href="#the-problems-solved-by-the-proposition" title="Прямая ссылка на этот заголовок">​</a></h2><p>However, when adopted, the proposition will solve the following issues:</p><ol><li><p>Using the underscore <code>_</code> to namespace functions – this isn’t the right thing to do because the prefix is being
already used by the completion functions, so the namespace is already filled up greatly and the plugin functions get
lost in it.</p></li><li><p>Not using a prefix at all – this is also an unwanted practice as it pollutes the command namespace
(<a href="https://github.com/z-shell/fast-syntax-highlighting/issues/157" target="_blank" rel="noopener noreferrer">an example</a> of such issue appearing).</p></li><li><p>It would allow to quickly discriminate between function types – e.g.: seeing the <code>:</code> prefix informs the user that
it’s a hook-type function while seeing the <code>@</code> prefix informs the user that it’s an API-like function, etc.</p></li><li><p>It also provides an improvement during programming, by allowing to quickly limit the number of completions offered by
the editor, e.g.: for Vim’s <code>Ctrl-P</code> completing, when entering <code>+&lt;Ctrl-P&gt;</code>, then only a subset of the functions are
being completed (see below for the type of the functions). <strong>Note:</strong> the editor has to be configured so that it
accepts such special characters as part of keywords, for Vim it’s: <code>:set isk+=@-@,.,+,/,:</code> for all of the proposed
prefixes.</p></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="the-proposed-function-name-prefixes">The Proposed Function-Name Prefixes<a class="hash-link" href="#the-proposed-function-name-prefixes" title="Прямая ссылка на этот заголовок">​</a></h2><p>The proposition of the standard prefixes is as follows:</p><ol><li><p><code>.</code>: for regular private functions. Example function: <code>.prompt_zinc_get_value</code>.</p></li><li><p><code>→</code>: for hook-like functions, so it should be used e.g.: for the <a href="#use-of-add-zsh-hook-to-install-hooks">Zsh hooks</a>
and the <a href="#use-of-add-zle-hook-widget-to-install-zle-hooks">Zle hooks</a>, but also for any other, custom hook-like
mechanism in the plugin.</p></li></ol><p>Example function name: <code>→prompt_zinc_precmd</code>.</p><ul><li><p>the previous version of the document recommended colon (<code>:</code>) for the prefix, however, it was problematic, because
Windows doesn’t allow colons in file names, so it wasn’t possible to name an autoload function this way,</p></li><li><p>the arrow has a rationale behind it - it denotes the execution <strong>coming back</strong> to the function at a later time, after
it has been registered as a callback or a handler,</p></li><li><p>the arrow is easy to type on most keyboard layouts – it is <code>Right-Alt</code>+<code>I</code>; in case of problems with typing the
character can be always copied – handler functions do occur in the code rarely,</p></li><li><p>Zsh supports any string as a function name, because absolutely any string can be a <strong>file</strong> name – if there would be
an exception in the name of the callables, then how would it be possible to run a script called &quot;→abcd&quot;? There are
<strong>no</strong> exceptions, the function can be called even as a the sequence of null bytes:</p></li></ul><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ❯ </span><span class="token string" style="color:rgb(255, 121, 198)">$&#x27;</span><span class="token string entity" style="color:rgb(255, 121, 198)">\0</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> print hello </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ❯ </span><span class="token string" style="color:rgb(255, 121, 198)">$&#x27;</span><span class="token string entity" style="color:rgb(255, 121, 198)">\0</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    hello</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><ol start="3"><li><p><code>+</code>: for output functions, i.e.: for functions that print to the standard output and error or a log, etc. Example
function name: <code>+prompt_zinc_output_segment</code>.</p></li><li><p><code>/</code>: for debugging functions, i.e: for functions that output debugs messages to the screen or a log or e.g.: gather
some debug data. <strong>Note:</strong> the slash makes it impossible for such functions to be auto-loaded via the <code>autoload</code>
mechanism. It is somewhat risky to assume, that this will never be needed for the functions, however, the limited
number of available ASCII characters justifies such allocation. Example function name: <code>/prompt_zinc_dmsg</code>.</p></li><li><p><code>@</code>: for API-like functions, i.e: for functions that are on a boundary to a subsystem and expose its functionality
through a well-defined, in general fixed interface. For example this plugin standard <a href="#update-register-call">defines</a>
the function <code>@zsh-plugin-run-on-update</code>, which is exposing a plugin manager’s functionality in a well-defined way.</p></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="example-code-utilizing-the-prefixes">Example Code Utilizing The Prefixes<a class="hash-link" href="#example-code-utilizing-the-prefixes" title="Прямая ссылка на этот заголовок">​</a></h2><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token function-name function" style="color:rgb(80, 250, 123)">zinc_register_hooks</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    add-zsh-hook precmd :zinc_precmd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /zinc_dmsg </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Installed precmd hook with result: </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$?</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @zsh-plugin-run-on-unload </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;add-zsh-hook -d precmd :zinc_precmd&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    +zinc_print </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Zinc initialization complete&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="preventing-function-pollution">Preventing Function Pollution<a class="hash-link" href="#preventing-function-pollution" title="Прямая ссылка на этот заголовок">​</a></h2><p>When writing a larger autoload function, it very often is the case that the function contains definitions of other
functions.</p><p>When the main function finishes executing, the functions are being left defined. This might be undesired, e.g.: because
of the command namespace pollution.</p><p>The following snippet of code, when added at the beginning of the main function will automatically unset the
sub-functions when leaving the main function to don&#x27;t leak any functions into the global namespace:</p><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">typeset</span><span class="token plain"> -g prjef</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">prjef</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${(k)functions}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">trap</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;unset -f -- </span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">\</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${(k)functions</span><span class="token string variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">[</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">@</span><span class="token string variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">]</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">:</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">|prjef}</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)"> &amp;&gt;/dev/null; unset prjef&quot;</span><span class="token plain"> EXIT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">trap</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;unset -f -- </span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">\</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${(k)functions</span><span class="token string variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">[</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">@</span><span class="token string variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">]</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">:</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">|prjef}</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)"> &amp;&gt;/dev/null; unset prjef; return 1&quot;</span><span class="token plain"> INT</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><p>Replace the <code>prj*</code> prefix with your project name, e.g.: <code>rustef</code> for a <code>rust</code>-related plugin. The <code>*ef</code> stands for
&quot;entry functions&quot;. The snippet works as follows:</p><ol><li><p>The line <code>prjef=( ${(k)functions} )</code> remembers all the functions that are currently defined – which means that the
list excludes the functions that are to be yet defined by the body of the main function.</p></li><li><p>The code <code>unset -f — &quot;${(k)functions[@]:|prjef}&quot;</code> first does an subtraction of array contents – the <code>:|</code> substitution
operator – of the functions that are defined at the moment of leaving of the function (the <code>trap</code>-s invoke the code
in this moment) with the list of functions from the start of the main function – the ones stored in the variables
<code>$prjef</code>.</p></li><li><p>It then unsets the resulting list of the functions – being only the newly defined functions in the main function – by
passing it to <code>unset -f …</code>.</p></li></ol><p>This way the functions defined by the body of the main (most often an autoload) the function will be only set during the
execution of the function.</p><h2 class="anchor anchorWithHideOnScrollNavbar_I3q0" id="preventing-parameter-pollution">Preventing Parameter Pollution<a class="hash-link" href="#preventing-parameter-pollution" title="Прямая ссылка на этот заголовок">​</a></h2><p>When writing a plugin one often needs to keep a state during the Zsh session. To do this it is natural to use global
parameters. However, when the number of the parameters grows one might want to limit it.</p><p>With the following method, only a single global parameter per plugin can be sufficient:</p><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">typeset</span><span class="token plain"> -A PlgMap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">typeset</span><span class="token plain"> -A SomeMap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">typeset</span><span class="token plain"> -a some_array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Use</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PlgMap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SomeMap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">some_array</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">=</span><span class="token plain">state</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><p>can be converted into:</p><div class="codeBlockContainer_NBvI language-shell theme-code-block"><div class="codeBlockContent_yvht shell"><pre tabindex="0" class="prism-code language-shell codeBlock_JBFj thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_vKmw"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">typeset</span><span class="token plain"> -A PlgMap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Use</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PlgMap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PlgMap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">SomeMap__state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PlgMap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">some_array__1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">=</span><span class="token plain">state</span><br></span></code></pre><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_RlMu clean-btn">Скопировать</button></div></div><p>The use of this method is very unproblematic.</p><p>The author reduced the number of global parameters in one of the projects by 21 by using an automatic conversion with
Vim substitution patterns with backreferences without any problems.</p><p>Following the <a href="#standard-plugins-hash">Standard Plugins Hash</a> section, the plugin could even use a common hash name –
<code>Plugins</code> – to lower the pollution even more.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://digitalclouds.crowdin.com/z-shell/ru" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eFjq" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Отредактировать эту страницу</a></div><div class="col lastUpdated_I5LP"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Навигация по странице документации"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/ru/community/intro"><div class="pagination-nav__sublabel">Предыдущая страница</div><div class="pagination-nav__label">Zsh Knowledge Base</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/ru/community/zsh_handbook"><div class="pagination-nav__sublabel">Следующая страница</div><div class="pagination-nav__label">Zsh Native Scripting Handbook</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_wO_i thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-a-zsh-plugin" class="table-of-contents__link toc-highlight">What Is A Zsh Plugin?</a></li><li><a href="#zero-handling" class="table-of-contents__link toc-highlight">1. Standardized <code>$0</code> Handling</a><ul><li><a href="#status--zero-handling-" class="table-of-contents__link toc-highlight"><strong>STATUS:</strong>  zero-handling </a></li></ul></li><li><a href="#funtions-directory" class="table-of-contents__link toc-highlight">2. Functions Directory</a><ul><li><a href="#status--functions-directory-" class="table-of-contents__link toc-highlight"><strong>STATUS:</strong>  functions-directory </a></li></ul></li><li><a href="#binaries-directory" class="table-of-contents__link toc-highlight">3. Binaries Directory</a><ul><li><a href="#status--binaries-directory-" class="table-of-contents__link toc-highlight"><strong>STATUS:</strong>  binaries-directory </a></li></ul></li><li><a href="#unload-function" class="table-of-contents__link toc-highlight">4. Unload Function</a><ul><li><a href="#unload-function" class="table-of-contents__link toc-highlight"><strong>STATUS:</strong>  unload-function </a></li></ul></li><li><a href="#run-on-unload-call" class="table-of-contents__link toc-highlight">5. <code>@zsh-plugin-run-on-unload</code> Call</a><ul><li><a href="#status--run-on-unload-call-" class="table-of-contents__link toc-highlight"><strong>STATUS:</strong>  run-on-unload-call </a></li></ul></li><li><a href="#run-on-update-call" class="table-of-contents__link toc-highlight">6. <code>@zsh-plugin-run-on-update</code> Call</a><ul><li><a href="#status--run-on-update-call-" class="table-of-contents__link toc-highlight"><strong>STATUS:</strong>  run-on-update-call </a></li></ul></li><li><a href="#activity-indicator" class="table-of-contents__link toc-highlight">7. Plugin Manager Activity Indicator</a><ul><li><a href="#status--activity-indicator-" class="table-of-contents__link toc-highlight"><strong>STATUS:</strong>  activity-indicator </a></li></ul></li><li><a href="#global-parameter-with-prefix" class="table-of-contents__link toc-highlight">8. Global Parameter With PREFIX For Make, Configure, Etc</a><ul><li><a href="#status--global-parameter-with-prefix-" class="table-of-contents__link toc-highlight"><strong>STATUS:</strong>  global-parameter-with-prefix </a></li></ul></li><li><a href="#global-parameter-with-capabilities" class="table-of-contents__link toc-highlight">9. Global Parameter holding the plugin manager’s capabilities</a><ul><li><a href="#status--global-parameter-with-capabilities-" class="table-of-contents__link toc-highlight"><strong>STATUS:</strong>  global-parameter-with-capabilities </a></li></ul></li><li><a href="#zsh-plugin-programming-best-practices" class="table-of-contents__link toc-highlight">Zsh Plugin-Programming Best practices</a></li><li><a href="#use-of-add-zsh-hook-to-install-hooks" class="table-of-contents__link toc-highlight">Use Of <code>add-zsh-hook</code> To Install Hooks</a></li><li><a href="#use-of-add-zle-hook-widget-to-install-zle-hooks" class="table-of-contents__link toc-highlight">Use Of <code>add-zle-hook-widget</code> To Install Zle Hooks</a></li><li><a href="#standard-parameter-naming" class="table-of-contents__link toc-highlight">Standard Parameter Naming</a></li><li><a href="#standard-plugins-hash" class="table-of-contents__link toc-highlight">Standard <code>Plugins</code> Hash</a></li><li><a href="#standard-recommended-options" class="table-of-contents__link toc-highlight">Standard Recommended Options</a></li><li><a href="#standard-recommended-variables" class="table-of-contents__link toc-highlight">Standard Recommended Variables</a></li><li><a href="#standard-function-name-space-prefixes" class="table-of-contents__link toc-highlight">Standard Function Name-Space Prefixes</a></li><li><a href="#the-problems-solved-by-the-proposition" class="table-of-contents__link toc-highlight">The Problems Solved By The Proposition</a></li><li><a href="#the-proposed-function-name-prefixes" class="table-of-contents__link toc-highlight">The Proposed Function-Name Prefixes</a></li><li><a href="#example-code-utilizing-the-prefixes" class="table-of-contents__link toc-highlight">Example Code Utilizing The Prefixes</a></li><li><a href="#preventing-function-pollution" class="table-of-contents__link toc-highlight">Preventing Function Pollution</a></li><li><a href="#preventing-parameter-pollution" class="table-of-contents__link toc-highlight">Preventing Parameter Pollution</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/ru/docs/intro"><span>Introduction</span></a></li><li class="footer__item"><a class="footer__link-item" href="/ru/community/intro"><span>Community Docs</span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/z-shell/community/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_N6EJ"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://matrix.to/#/#zi:matrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Matrix.org<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_N6EJ"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/zshell_zi/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter.com<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_N6EJ"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/z-shell/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub Organization<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_N6EJ"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://digitalclouds.crowdin.com/z-shell/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Crowdin Translations<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_N6EJ"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/ru/blog"><span>Blog</span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/ru/legal/privacy_policy/"><span>Privacy Policy</span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Digital Clouds, Z-Shell ❮ ZI ❯ Community.</div></div></div></footer></div>
<script src="/ru/assets/js/runtime~main.6fd40405.js"></script>
<script src="/ru/assets/js/main.b1e6b9a5.js"></script>
</body>
</html>